(this["webpackJsonptodo-frontend"]=this["webpackJsonptodo-frontend"]||[]).push([[0],{14:function(e,t,c){},19:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},46:function(e,t,c){},55:function(e,t,c){},57:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(28),r=c.n(a),o=(c(42),c(14),c(43),c(15)),l=c.n(o),i=c(29),j=c(6),d=c(30),b=(c(19),c(46),c(2)),u=c(0),h=function(e){var t=e.trigger,c=e.setPop,n=e.children,s=Object(b.f)();return t?Object(u.jsxs)("div",{className:"block__popup",children:[n,Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"btn btn-danger",onClick:function(){localStorage.removeItem("token"),s.push("/")},children:"Logout"}),Object(u.jsx)("button",{className:"btn btn-primary",onClick:function(){return c(!1)},children:"Close"})]})]}):""},O=function(e){var t=e.title,c=Object(n.useState)(!1),s=Object(j.a)(c,2),a=s[0],r=s[1];return Object(u.jsxs)("div",{className:"block__title",children:[Object(u.jsx)("div",{children:t}),Object(u.jsx)("div",{className:"block__title-buttons",children:Object(u.jsx)("button",{onClick:function(){r(!0),console.log("clicked")},className:"button__logout",children:"Logout"})}),Object(u.jsx)(h,{trigger:a,setPop:r,children:Object(u.jsx)("p",{children:"Do you really want to logout?"})})]})},m=(c(55),function(e){var t=e.children,c=e.className;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:c,children:t})})}),x=(c(56),c(57),c(33)),p=c.n(x).a.create({baseURL:"https://api.ectd.ml/"}),f=function(){var e=Object(b.f)(),t=Object(n.useState)(""),c=Object(j.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)(""),o=Object(j.a)(r,2),h=o[0],x=o[1],f=Object(n.useState)(null),v=Object(j.a)(f,2),g=v[0],k=v[1],N=function(){var t=Object(i.a)(l.a.mark((function t(c){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),console.log(s,h),n={headers:{Authorization:"Basic "+Object(d.encode)("".concat(s,":").concat(h))}},t.prev=3,t.next=6,p.get("login",n);case 6:a=t.sent,console.log(a.data),localStorage.setItem("token",a.data.token),e.push("/dashboard"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),401===t.t0.response.status&&k("Invalid Username or Password");case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(O,{title:"Login"}),Object(u.jsx)(m,{className:"block__slate",children:Object(u.jsx)("div",{className:"card p-5 in2",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("form",{onSubmit:N,children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("h2",{children:"Login"}),Object(u.jsx)("label",{htmlFor:"username",children:"Email address"}),Object(u.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"Enter username",value:s,onChange:function(e){a(e.target.value)}})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password"}),Object(u.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:h,onChange:function(e){return x(e.target.value)}})]}),Object(u.jsxs)("div",{className:"form-group form-check",children:[Object(u.jsx)("input",{type:"checkbox",className:"form-check-input",id:"remember"}),Object(u.jsx)("label",{className:"form-check-label",htmlFor:"remember",children:"Remember me"})]}),Object(u.jsx)("div",{style:{color:"#DF362D"},children:g}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]})})})})]})},v=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){fetch("/user",{method:"GET",headers:{}}).then((function(e){return e.json()})).then((function(e){s(e),console.log(e)})).catch(console.error)}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(O,{title:"All Users"}),Object(u.jsx)(m,{className:"block__slate",children:Object(u.jsxs)("div",{className:"darkback",children:[Object(u.jsx)("h1",{children:"Hi There"}),0!==c.length&&c.map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:e.id}),Object(u.jsx)("h1",{children:e.name})]},e.id)}))]})})]})},g=c(7),k=c(11),N=(c(76),function(e){var t=e.children,c=Object(n.useContext)(D);return console.log(c),Object(u.jsxs)("div",{className:"block__card",children:[t,Object(u.jsx)("p",{children:c})]})}),_=localStorage.getItem("token"),y={headers:{Authorization:"Bearer "+_}},C=function(){var e="toggle",t="fetch_todos",c="delete_todo",s=Object(b.f)(),a=Object(n.useReducer)((function(n,s){switch(s.type){case e:return n.map((function(e){return e.id===s.payload.id?(p.put("/todo/".concat(e.id),{complete:!e.complete},{headers:{Authorization:"Bearer "+_}}).then((function(t){e.complete=!e.complete})).catch((function(e){console.log(e.response.status)})),Object(k.a)(Object(k.a)({},e),{},{complete:!e.complete})):Object(k.a)({},e)}));case c:return n.filter((function(e){return e.id!==s.payload.id}));case t:return s.payload.data;default:return n}}),[]),r=Object(j.a)(a,2),o=r[0],l=r[1];Object(n.useEffect)((function(){p.get("/todo",y).then((function(e){l({type:t,payload:{data:e.data}})})).catch((function(e){422===e.response.status?s.push("/"):401===e.response.status&&(alert("you have been logged out"),s.push("/"))}))}),[s,t]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(O,{title:"Dashboard"}),Object(u.jsxs)(m,{className:"block__slate--dashboard",children:[0!==o.length&&o.map((function(t){return Object(u.jsxs)(N,{children:[Object(u.jsx)("h3",{children:t.text}),Object(u.jsx)("hr",{className:"elem__hr"}),t.complete?Object(u.jsx)("span",{children:"Completed"}):Object(u.jsx)("span",{children:"Incomplete"}),Object(u.jsx)("hr",{className:"elem__hr"}),Object(u.jsx)("button",{onClick:function(){return e=t.id,console.log(e),void s.push("/todoone/".concat(e));var e},className:"view",children:"View"}),Object(u.jsxs)("div",{className:"block__actions",children:[Object(u.jsx)("button",{onClick:function(){l({type:c,payload:{id:t.id}})},className:"delete",children:"Delete"}),Object(u.jsx)("button",{onClick:function(){l({type:e,payload:{id:t.id}})},className:"toggle",children:"Toggle"})]})]},t.id)})),Object(u.jsx)("button",{onClick:function(){alert("pressed addTodo")},className:"block__add--bottomRight",children:"+"})]})]})},w=function(e){var t=Object(b.g)().id,c=Object(n.useState)(""),s=Object(j.a)(c,2),a=s[0],r=s[1],o={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};return Object(n.useEffect)((function(){p.get("/todo/".concat(t),o).then((function(e){r(e.data.todo.text)}))})),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(O,{title:"Todo"}),Object(u.jsx)(m,{className:"block__slate",children:Object(u.jsx)("div",{children:a})})]})},S=c(34),F=c(35),A=c(37),P=c(36),I=function(e){Object(A.a)(c,e);var t=Object(P.a)(c);function c(){return Object(S.a)(this,c),t.apply(this,arguments)}return Object(F.a)(c,[{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(O,{title:"About"}),Object(u.jsx)(m,{children:Object(u.jsx)(E.Consumer,{children:function(e){return Object(u.jsx)("h1",{className:"block__slate",style:{color:"var(--accent)",fontSize:50},children:e})}})})]})}}]),c}(s.a.Component),D=s.a.createContext(),E=s.a.createContext();var L=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"LeftPane",children:[Object(u.jsx)("div",{className:"block__navbar",children:Object(u.jsxs)("ul",{children:[Object(u.jsx)(g.b,{activeClassName:"custom",to:"/",children:Object(u.jsx)("li",{children:"Home"})}),Object(u.jsx)(g.b,{activeClassName:"custom",to:"/about",children:Object(u.jsx)("li",{children:"About"})})]})}),Object(u.jsx)("div",{className:"block__navtitle",children:Object(u.jsxs)("p",{children:["TODO - Web App","\n","Made in react"]})})]}),Object(u.jsx)("div",{className:"block--right",children:Object(u.jsx)(D.Provider,{value:"I am in App component",children:Object(u.jsxs)(b.c,{children:[Object(u.jsx)(b.a,{exact:!0,path:"/",children:Object(u.jsx)(f,{})}),Object(u.jsx)(b.a,{exact:!0,path:"/getallusers",children:Object(u.jsx)(v,{})}),Object(u.jsx)(b.a,{exact:!0,path:"/dashboard",children:Object(u.jsx)(C,{})}),Object(u.jsx)(b.a,{exact:!0,path:"/todoone/:id",children:Object(u.jsx)(w,{})}),Object(u.jsx)(b.a,{exact:!0,path:"/about",children:Object(u.jsx)(E.Provider,{value:"Provider & Consumer ContextAPI example",children:Object(u.jsx)(I,{})})})]})})})]})};r.a.render(Object(u.jsx)(g.a,{basename:"/todo-frontend-reactflask",children:Object(u.jsx)(L,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.6003ad65.chunk.js.map