(this["webpackJsonptodo-frontend"]=this["webpackJsonptodo-frontend"]||[]).push([[0],{14:function(e,t,c){},19:function(e,t,c){},38:function(e,t,c){},41:function(e,t,c){},50:function(e,t,c){},52:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(28),r=c.n(a),o=(c(38),c(14),c(15)),l=c.n(o),i=c(29),d=c(6),j=c(30),b=(c(19),c(41),c(2)),u=c(0),h=function(e){var t=e.trigger,c=e.setPop,n=e.children,s=Object(b.f)();return t?Object(u.jsxs)("div",{className:"block__popup",children:[n,Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"btn btn-danger",onClick:function(){localStorage.removeItem("token"),s.push("/")},children:"Logout"}),Object(u.jsx)("button",{className:"btn btn-primary",onClick:function(){return c(!1)},children:"Close"})]})]}):""},m=function(e){var t=e.title,c=Object(n.useState)(!1),s=Object(d.a)(c,2),a=s[0],r=s[1];return Object(u.jsxs)("div",{className:"block__title",children:[Object(u.jsx)("div",{children:t}),Object(u.jsx)("div",{className:"block__title-buttons",children:Object(u.jsx)("button",{onClick:function(){r(!0),console.log("clicked")},class:"button__logout",children:"Logout"})}),Object(u.jsx)(h,{trigger:a,setPop:r,children:Object(u.jsx)("p",{children:"Do you really want to logout?"})})]})},O=(c(50),function(e){var t=e.children,c=e.className;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:c,children:t})})}),p=(c(51),c(52),c(33)),x=c.n(p).a.create({baseURL:"http://13.232.206.75/"}),f=function(){var e=Object(b.f)(),t=Object(n.useState)(""),c=Object(d.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)(""),o=Object(d.a)(r,2),h=o[0],p=o[1],f=Object(n.useState)(null),g=Object(d.a)(f,2),v=g[0],k=g[1],N=function(){var t=Object(i.a)(l.a.mark((function t(c){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),console.log(s,h),n={headers:{Authorization:"Basic "+Object(j.encode)("".concat(s,":").concat(h))}},t.prev=3,t.next=6,x.get("login",n);case 6:a=t.sent,console.log(a.data),localStorage.setItem("token",a.data.token),e.push("/dashboard"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),401===t.t0.response.status&&k("Invalid Username or Password");case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m,{title:"Login"}),Object(u.jsx)(O,{className:"block__slate",children:Object(u.jsx)("div",{className:"card p-5 in2",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("form",{onSubmit:N,children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("h2",{children:"Login"}),Object(u.jsx)("label",{htmlFor:"username",children:"Email address"}),Object(u.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"Enter username",value:s,onChange:function(e){a(e.target.value)}})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password"}),Object(u.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",value:h,onChange:function(e){return p(e.target.value)}})]}),Object(u.jsxs)("div",{className:"form-group form-check",children:[Object(u.jsx)("input",{type:"checkbox",className:"form-check-input",id:"remember"}),Object(u.jsx)("label",{className:"form-check-label",htmlFor:"remember",children:"Remember me"})]}),Object(u.jsx)("div",{style:{color:"#DF362D"},children:v}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})]})})})})]})},g=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){fetch("/user",{method:"GET",headers:{}}).then((function(e){return e.json()})).then((function(e){s(e),console.log(e)})).catch(console.error)}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m,{title:"All Users"}),Object(u.jsx)(O,{className:"block__slate",children:Object(u.jsxs)("div",{className:"darkback",children:[Object(u.jsx)("h1",{children:"Hi There"}),0!==c.length&&c.map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:e.id}),Object(u.jsx)("h1",{children:e.name})]},e.id)}))]})})]})},v=c(11),k=(c(71),function(e){var t=e.children,c=Object(n.useContext)(_);return console.log(c),Object(u.jsxs)("div",{className:"block__card",children:[t,Object(u.jsx)("p",{children:c})]})}),N=function(){var e=localStorage.getItem("token"),t="toggle",c="fetch_todos",s="delete_todo",a=Object(b.f)(),r=Object(n.useReducer)((function(n,a){switch(a.type){case t:return n.map((function(t){return t.id===a.payload.id?(x.put("/todo/".concat(t.id),{complete:!t.complete},{headers:{Authorization:"Bearer "+e}}).then((function(e){t.complete=!t.complete})).catch((function(e){console.log(e.response.status)})),Object(v.a)(Object(v.a)({},t),{},{complete:!t.complete})):Object(v.a)({},t)}));case s:return n.filter((function(e){return e.id!==a.payload.id}));case c:return a.payload.data;default:return n}}),[]),o=Object(d.a)(r,2),l=o[0],i=o[1];Object(n.useEffect)((function(){var t={headers:{Authorization:"Bearer "+e}};x.get("/todo",t).then((function(e){i({type:c,payload:{data:e.data}})})).catch((function(e){422===e.response.status?a.push("/"):401===e.response.status&&(alert("you have been logged out"),a.push("/"))}))}),[a,e,c]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m,{title:"Dashboard"}),Object(u.jsxs)(O,{className:"block__slate--dashboard",children:[0!==l.length&&l.map((function(e){return Object(u.jsxs)(k,{children:[Object(u.jsx)("h3",{children:e.text}),Object(u.jsx)("hr",{className:"elem__hr"}),e.complete?Object(u.jsx)("span",{children:"Completed"}):Object(u.jsx)("span",{children:"Incomplete"}),Object(u.jsx)("hr",{className:"elem__hr"}),Object(u.jsxs)("div",{className:"block__actions",children:[Object(u.jsx)("button",{onClick:function(){i({type:s,payload:{id:e.id}})},className:"delete",children:"Delete"}),Object(u.jsx)("button",{onClick:function(){i({type:t,payload:{id:e.id}})},className:"toggle",children:"Toggle"})]})]},e.id)})),Object(u.jsx)("button",{onClick:function(){alert("pressed addTodo")},className:"block__add--bottomRight",children:"+"})]})]})},_=s.a.createContext("I am in App component");console.log(_);var y=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"LeftPane",children:Object(u.jsx)("div",{className:"login-lp",children:Object(u.jsxs)("p",{children:["TODO - Web App","\n","Made in react"]})})}),Object(u.jsx)("div",{className:"block--right",children:Object(u.jsx)(_.Provider,{value:"I am in App component",children:Object(u.jsxs)(b.c,{children:[Object(u.jsx)(b.a,{exact:!0,path:"/",children:Object(u.jsx)(f,{})}),Object(u.jsx)(b.a,{path:"/getallusers",children:Object(u.jsx)(g,{})}),Object(u.jsx)(b.a,{path:"/dashboard",children:Object(u.jsx)(N,{})})]})})})]})},w=c(7);r.a.render(Object(u.jsx)(w.a,{basename:"/todo-frontend-reactflask",children:Object(u.jsx)(y,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.68723c8e.chunk.js.map